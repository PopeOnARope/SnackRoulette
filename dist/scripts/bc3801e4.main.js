$(document).ready(function(){form.init()});var preferences={};preferences.breakfast=[];var form={init:function(){form.initEvents()},initEvents:function(){$("#mealsForm").on("submit",form.addFoodToArr)},addFoodToArr:function(a){a.preventDefault(),$("#breakfastInput").empty(),preferences.breakfast.push($("#breakfastInput").val()),console.log(preferences.breakfast),home.getMeal()},genNum:function(a){var b=Math.floor(Math.random()*a.length);return b}};$(document).ready(function(){home.init()});var home={init:function(){home.initEvents()},initEvents:function(){$("#mealsForm").on("submit",home.getMeal,home.appendNumbers)},renderTmpl:function(a,b,c){var d=_.template(b,c);a.html(d)},getMeal:function(){var a,b=preferences.breakfast,c=home.iterateFoods(b),d=$(".inMoodForInput").val(),e=$(".specialDietInput").val();a="sweet"===d?"&flavor.sweet.min=0.8&flavor.sweet.max=1&flavor.piquant.min=0&flavor.piquant.max=0.2":"spicy"===d?"&flavor.sweet.min=0.0&flavor.sweet.max=0.2&flavor.piquant.min=0.3&flavor.piquant.max=0.9":"";var f;f="vegetarian"===e?"&allowedDiet[]=387^Lacto-ovo+vegetarian":"pescatarian"===e?"&allowedDiet[]=390^Pescetarian":"vegan"===e?"&allowedDiet[]=386^Vegan":"gluten-free"===f?"&allowedAllergy[]=393^Gluten-Free":"";var g="http://api.yummly.com/v1/api/recipes?_app_id=3749ecd0&_app_key=f2d7e42e718a093a05a25d495c821b1f"+c+a+f+"&requirePictures=true";console.log(g),$.ajax({url:g,type:"GET",dataType:"jsonp",success:function(a){var c=window.matches=a;console.log(c),home.renderTmpl($(".foodSchedule"),templates.matches,c),home.generateReport(d,e,b)}})},generateReport:function(a,b,c){var d=c.join(", ");$(".report").html("<h3>Ok! Here are some recipes for "+a+" "+b+" snacks containing "+d+":</h3>")},iterateFoods:function(a){var b,c="";for(b=0;b<a.length;b++)c+="&allowedIngredient[]="+a[b];return c}},templates={};templates.matches='<%_.each(_.shuffle(matches), function(element,index,list){%><div class="mealColumn"><img src= "<%= (element.imageUrlsBySize[90]).split("=")[0] %>"><h4><a data-toggle="modal" data-target="#myModal<%=index%>"><%=element.recipeName%></a></h4><div class="modal fade" id="myModal<%=index%>"><div class="modal-dialog"><h3 class="hh"><%=element.recipeName %> <a class="glyphicon glyphicon-remove" data-dismiss="modal"></a></h3><br><img class="modalImage" src= "<%= (element.imageUrlsBySize[90]).split("=")[0] %>"><div class="ingredientBox"><h4>What you\'ll need:</h4><p><%= element.ingredients.join("<br>") %></p><p><strong>Estimated prep time:</strong> <%=(Math.floor(element.totalTimeInSeconds/60))%> minutes.</p><p>Click <a href="http://www.yummly.com/recipe/external/<%=element.id%>">here</a> for the full recipe</div></div></div></div><% }); %>';